<!DOCTYPE html>
<html layout:decorate="~{layout}" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<link href="https://fonts.googleapis.com/css?family=Crete+Round"
	rel="stylesheet">
<script src="https://cdn.zingchart.com/zingchart.min.js"></script>

</head>
<div layout:fragment="content" class="container my-3">
	<input type="hidden" th:name="${_csrf.parameterName}"
		th:value="${_csrf.token}" id="_csrf" />
	<div id="searchChart"></div>
</div>


<script layout:fragment="script" type='text/javascript'>
	zingchart.MODULESDIR = 'https://cdn.zingchart.com/modules/';
	
	const response = fetch('/api/words', {
		method : 'GET',
		headers : {
			'X-CSRF-Token' : $('#_csrf').attr('value')
		},
	}).then(res => res.json()).then((data) => renderWordCloud(data));
	
	function renderWordCloud(data) {
		  zingchart.render({
		    id: 'searchChart',
		    data: {
		      "type": "wordcloud",
		      "options": {
		        "words": data,
		        minLength : 5,
				ignore : [ "" ],
				maxItems : 40,
				aspect : 'spiral', 
				palette: ['#2196F3', '#3F51B5', '#42A5F5', '#5C6BC0', '#64B5F6', '#7986CB', '#90CAF9', '#9FA8DA', '#BBDEFB', '#C5CAE9'],
				style : {
					fontFamily : 'Crete Round',
					hoverState : {
						backgroundColor : '#D32F2F',
						borderRadius : 2,
						fontColor : 'white'
					},
					tooltip : {
						text : '%text: %hits',
						visible : true,
						alpha : 0.9,
						backgroundColor : '#1976D2',
						borderRadius : 2,
						borderColor : 'none',
						fontColor : 'white',
						fontFamily : 'Georgia',
						textAlpha : 1
					}
				}
		      },
		      source : {
					fontColor : '#64B5F6',
					fontSize : 10,
					fontFamily : 'Georgia',
					fontWeight : 'normal',
					marginBottom : '10%'
				}
		    },
		    height: 400,
		    width: "100%"
		  });
		}
	
</script>
</html>
